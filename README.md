# MP3Lyrics
コマンドライン操作でMP3ファイルに歌詞を埋め込むことが出来るようなソフトウェア


## 何ができる？
MP3ファイルにはID3形式と呼ばれるヘッダを付加することができ、
そこに楽曲のタイトルやアーティスト名・アルバムアートなどを
埋め込むことができる。歌詞データも含むこれらメタデータを
埋め込むソフトは数多く存在する。  
なら何で自作したかって？電気民の血がさわいでしまったのさ。

使いたい状況としては、あるディレクトリに複数のMP3ファイルが存在し、
同時に各楽曲ごとにテキストファイルで歌詞データが用意されているとする。
既存のフリーソフトを用いてGUIからひとつずつ操作し
埋め込むのは面倒なのでスクリプトからパパっと処理したい。

## 仕様
- MP3ファイルのタグ形式：ID3v2.3~v2.4のみをサポート
- 埋め込む歌詞の詳細
	- エンコーディング：UTF-16(LE, BOM付き)
	- 言語："jpn"
	- 説明テキスト：""
	- 内容テキスト："{歌詞の文字列}"
- 実行環境：Windows + MinGW
    UTF8<>UTF16を相互変換する`charset.*`内にWindowsAPIに依存した実装あり

## ビルド
Makefileを叩くだけ

## 使う
ファイル名を指定してmp3楽曲にtxtファイルで与える歌詞を埋め込む.
`$./lyrics.exe {file_name}`

以下の２ファイルが同ディレクトリに存在すること。
- 楽曲 {file_name}.mp3 : ID3v2.3~v2.4形式のヘッダ付き
- 歌詞ファイル {file_name}.txt : UTF-8仮定 (BOMなし)

### 複数MP3ファイルを一括処理
複数のファイルを一括で処理するスクリプトをRubyで用意  
`ruby lyrics.rb`と叩けばそのディレクトリ下にある同名の
MP3,txtファイルを探して歌詞を埋め込んでくれる。

## 参考
MP3 ID3v2の詳細
[ID3v2フレーム一覧](https://akabeko.me/blog/memo/mp3/id3v2-frame-list/)
[ID3v2フレーム詳細](https://akabeko.me/blog/memo/mp3/id3v2-frame-detail/)  

UTF-8,UTF-16の変換
[16->8](http://yanchde.gozaru.jp/utf16_to_utf8/utf16_to_utf8_1.html)
[8->16](http://yanchde.gozaru.jp/utf8_to_utf16/utf8_to_utf16_2.html)